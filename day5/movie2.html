<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <title>API 서비스와 AJAX</title>
</head>

<body>
    <img id="img">
    <script>
        // 요청하면 결과를 json으로 제공하는 서버 : API서버
        // AJAX : 2008년 구글이 만든 화면을 부분 갱신하는 기술     

        // 서버에 부분갱신요청(ajax요청을 보내자)을 jQuery로 보내기
        $.ajax({
            url: 'https://dog.ceo/api/breeds/image/random', // api 주소
            // method: 'get 또는 post', 생략가능
            // data: '서버로 넘기는 urlencoded 값', 생략
            success: function (result) {
                // api 서버는 json 응답을 보내준다
                // 원래 문자열을 JSON.parse()해야한다
                // 그런데 웹브라우저가 객체로 자동 변환했다
                $('#img').attr('src',result.message);
                console.log(result); //'ajax 요청이 성공했을 때 실행되는 함수'
            },
            error: function () {
                alert('네트워크 오류 발생');//'ajax 요청이 실패했을 때 실행되는 함수'
            }
        })
    </script>
</body>

</html>